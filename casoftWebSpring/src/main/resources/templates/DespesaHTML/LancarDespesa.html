<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Despesa</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/estilo.css" rel="stylesheet">
  <style>

    </style>
</head>
<body class="bg-light">
  <!-- Header fixo -->
  <header class="header">
    <div class="container">
      <div class="header-container d-flex align-items-center">
        <button class="menu-toggle d-md-none" id="menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../img/logo.png" alt="Logo">
        <button id="btnLogout" onclick="authManager.logout()" class="btn btn-danger ml-auto">Deslogar</button>
      </div>
    </div>
  </header>

  <!-- Overlay escuro -->
  <div class="overlay" id="overlay"></div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h4 class="p-3">Menu</h4>
    <a href="../home.html">Home</a>
    <a href="../ParametrizacaoHTML/cadastroEmpresa.html">Empresa</a>
    <a href="../EventoHTML/homeEvento.html">Eventos</a>
    <a href="../TipoReceitasHTML/homeTPReceita.html">Tipos de Receita</a>
    <a href="../TipoDespesasHTML/tipoDespesa.html">Tipos de Despesas</a>
    <a href="#">Relatórios</a>
    <a href="#">Configurações</a>
    <a href="../gerenciarContas.html">Contas Bancárias</a>
    <a href="#" id="ListarDespesa.html">Despesa</a>
    <a href="../gerenciarContas.html">Contas Bancárias</a>
  </div>

  <!-- Conteúdo principal -->
  <div class="content" id="content">
    <div class="container mt-5 mb-5">
      <div class="row justify-content-center">
        <div class="col-lg-9 col-md-10">
          <div class="card form-card">
            <div class="card-body p-3" style="margin: 10px;">
                <div class="card-sectiontext-dark">
                  <h3 class="text-center">Cadastro de Despesa</h3>
                </div>
              <form method="POST" id="formDespesa" enctype="multipart/form-data" onsubmit="return enviarFormularioDespesa(event)">
                
                <!-- Categoria e Descrição -->
                <div class="card-section">
                  <h5 class="section-title">Descrição</h5>
                  <div class="row mb-3">
                    <div class="col-md-8">
                      <label for="categoriadespesa_catdesp_id" class="form-label">Categoria da Despesa <span class="required">*</span></label>
                      <select id="categoriadespesa_catdesp_id" name="tipoDespesa_id" class="form-select custom-input" required>
                        <option value="">Carregando categorias...</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <label for="despesa_desc" class="form-label">Descrição</label>
                    <textarea id="despesa_desc" name="descricao" class="form-control custom-input" rows="3" placeholder="Descrição detalhada da despesa..."></textarea>
                  </div>
                </div>
                <!-- Dados da Despesa -->
                <div class="card-section">
                    <h5 class="section-title">Informações da Despesa</h5>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="despesa_val" class="form-label">Valor <span class="required">*</span></label>
                            <input type="number" id="despesa_val" name="valor" class="form-control custom-input" step="0.01" min="0" placeholder="0,00" required>
                        </div>
                        <div class="col-md-6">
                            <label for="despesa_val_pago" class="form-label">Valor Pago</label>
                            <input type="number" id="despesa_val_pago" name="pagamento" class="form-control custom-input" step="0.01" min="0" placeholder="0,00">
                            <small class="text-muted">Se não pago, deixe vazio ou 0</small>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                        <label for="despesa_dt_venc" class="form-label">Data de Vencimento <span class="required">*</span></label>
                        <input type="date" id="despesa_dt_venc" name="data_venc" class="form-control custom-input" required>
                        </div>
                        <div class="col-md-6">
                        <label for="despesa_statusconci" class="form-label">Status da Conciliação <span class="required">*</span></label>
                        <select id="despesa_statusconci" name="status_conci" class="form-select custom-input" required>
                            <option value="">Selecione</option>
                            <option value="Aguardando">Aguardando</option>
                            <option value="Conciliado">Conciliado</option>
                        </select>
                        </div>
                    </div>
                </div>
                
                
                <!-- Evento (Opcional) -->
                <div class="card-section">
                  <h5 class="section-title">Associação a Evento (Opcional)</h5>
                  <div class="mb-3">
                    <div class="col-md-8">
                    <label for="evento_evento_id" class="form-label">Evento Relacionado</label>
                    <select id="evento_evento_id" name="evento_id" class="form-select custom-input">
                      <option value="">Carregando eventos...</option>
                    </select>
                    <small class="text-muted">Selecione um evento se esta despesa estiver relacionada</small>
                  </div>
                </div>
                </div>
            
                
                <!-- Botões -->
                <div class="row mt-4">
                  <div class="col-md-6 mb-2">
                    <button type="button" class="btn btn-secondary w-100" onclick="limparFormularioDespesa()">Limpar</button>
                  </div>
                  <div class="col-md-6 mb-2">
                    <button type="submit" class="btn btn-primary w-100">Cadastrar Despesa</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/authManager.js"></script>
  <script src="../js/authenticatedClient.js"></script>
  <script src="../js/tokenVerification.js"></script>
  <script src="../js/scriptDespesa.js"></script>
  <script src="../js/scripts.js"></script>
  <script>
    const toggle = document.getElementById('lancarDespesaToggle');
    const submenu = document.getElementById('submenuDespesa');

    toggle.addEventListener('click', function(event) {
        event.preventDefault();
        if (submenu.classList.contains('open')) {
        submenu.classList.remove('open');
        toggle.textContent = 'Despesa ▼';
        } else {
        submenu.classList.add('open');
        toggle.textContent = 'Despesa ▲';
        }
    });
</script>
</body>
</html>